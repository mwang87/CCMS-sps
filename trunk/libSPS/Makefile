################################################################################
# Definitions
################################################################################
BASE_DIR := ../..
#-------------------------------------------------------------------------------
include $(BASE_DIR)/Makefiles/Makefile.defs

################################################################################
# Conditions
################################################################################
include $(BASE_DIR)/Makefiles/Makefile.cond

################################################################################
# Compile rules - general
################################################################################
include $(BASE_DIR)/Makefiles/Makefile.general

################################################################################
# Source files - LIBSPS
################################################################################
CPPLIB_SRC = \
	AssembledPeak.cpp \
   AbruijnEdge.cpp \
   AbruijnGraph.cpp \
   AbruijnGraph2.cpp \
   AbruijnNode.cpp \
   JumpEdge.cpp \
   SpectrumAlignment.cpp \
   SpectrumAlignmentSet.cpp \
   SpectrumAligner.cpp

################################################################################
# Target
################################################################################
all: $(LIBSPS_SRC)

################################################################################
# Compile rules: Specific
################################################################################
CPPLIB_OBJ=$(CPPLIB_SRC:.cpp=.o)

$(LIBSPS_SRC): $(CPPLIB_OBJ)
	$(AR) rc $@ $^
	$(RANLIB) $@

$(LIBSPS_SRC_DYNAMIC): $(CPPLIB_OBJ)
	$(CXX) -shared  -Wl,-rpath,$(ROOT) -Wl,-soname,$@.1 -o $@.1.0 $^
	ln -s $@.1.0 $@.1
	ln -s $@.1 $@

################################################################################
# Compile rules: cleanup
################################################################################
clean:
	rm -f *.o *.a depends *~ *.bak

################################################################################
